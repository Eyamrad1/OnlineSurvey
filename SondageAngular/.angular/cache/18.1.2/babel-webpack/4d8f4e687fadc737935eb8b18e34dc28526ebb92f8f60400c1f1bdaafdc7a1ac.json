{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/question.service\";\nimport * as i2 from \"../../service/sondage.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"../../components/sidebar/sidebar.component\";\nimport * as i8 from \"../../components/navbars/admin-navbar/admin-navbar.component\";\nfunction QuestionTableComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelement(1, \"img\", 15);\n    i0.ɵɵelementStart(2, \"p\", 16);\n    i0.ɵɵtext(3, \"No questions available for this survey.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function QuestionTableComponent_div_17_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goToAddQuestion());\n    });\n    i0.ɵɵtext(5, \"Add First Question\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction QuestionTableComponent_div_18_div_1_div_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵelement(1, \"div\", 30);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", option_r6.texte, \" \");\n  }\n}\nfunction QuestionTableComponent_div_18_div_1_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, QuestionTableComponent_div_18_div_1_div_7_div_1_Template, 3, 1, \"div\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const question_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", question_r5.options);\n  }\n}\nfunction QuestionTableComponent_div_18_div_1_hr_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"hr\", 31);\n  }\n}\nfunction QuestionTableComponent_div_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 23)(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function QuestionTableComponent_div_18_div_1_Template_button_click_4_listener() {\n      const question_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.confirmDelete(question_r5));\n    });\n    i0.ɵɵtext(5, \"Delete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 25);\n    i0.ɵɵtemplate(7, QuestionTableComponent_div_18_div_1_div_7_Template, 2, 1, \"div\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, QuestionTableComponent_div_18_div_1_hr_8_Template, 1, 0, \"hr\", 27);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const question_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(question_r5.text);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", question_r5.options && question_r5.options.length > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isLastQuestion(question_r5));\n  }\n}\nfunction QuestionTableComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, QuestionTableComponent_div_18_div_1_Template, 9, 3, \"div\", 19);\n    i0.ɵɵelementStart(2, \"div\", 20)(3, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function QuestionTableComponent_div_18_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goToAddQuestion());\n    });\n    i0.ɵɵtext(4, \"+\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.questions);\n  }\n}\nexport let QuestionTableComponent = /*#__PURE__*/(() => {\n  class QuestionTableComponent {\n    constructor(questionService, sondageService, snackBar, router, route) {\n      this.questionService = questionService;\n      this.sondageService = sondageService;\n      this.snackBar = snackBar;\n      this.router = router;\n      this.route = route;\n      this.questions = [];\n      this.idSondage = 0;\n    }\n    ngOnInit() {\n      this.idSondage = Number(this.route.snapshot.paramMap.get('idSondage'));\n      if (this.idSondage) {\n        this.getSondageById(this.idSondage);\n        this.getAllQuestionsWithOptions(this.idSondage);\n      } else {\n        console.error('No idSondage provided');\n      }\n    }\n    getSondageById(idSondage) {\n      this.sondageService.findSondageById(idSondage).subscribe({\n        next: sondage => {\n          this.sondage = sondage;\n          console.log('Sondage:', this.sondage);\n        },\n        error: err => {\n          console.error('Error fetching sondage', err);\n        }\n      });\n    }\n    isLastQuestion(question) {\n      return this.questions.indexOf(question) === this.questions.length - 1;\n    }\n    getAllQuestionsWithOptions(idSondage) {\n      this.questionService.getAllQuestionsWithOptions(idSondage).subscribe({\n        next: questions => {\n          this.questions = questions;\n          if (this.sondage) {\n            this.sondage.questions = this.questions; // Populate sondage with questions\n          } else {\n            this.sondage = {\n              idSondage: this.idSondage,\n              questions\n            };\n          }\n          console.log('Questions with options:', this.questions);\n        },\n        error: err => {\n          console.error('Error fetching questions', err);\n        }\n      });\n    }\n    cancel() {\n      this.router.navigate(['/SondageTable']);\n    }\n    confirmDelete(question) {\n      if (confirm('Are you sure you want to delete this question?')) {\n        this.deleteQuestion(question);\n        window.location.reload();\n        this.snackBar.open('Question deleted successfully!', 'Close', {\n          duration: 9000\n        });\n      }\n    }\n    deleteQuestion(question) {\n      if (question && question.idQuestion) {\n        this.questionService.deleteQuestionById(question.idQuestion).subscribe(() => {\n          this.getAllQuestionsWithOptions(this.idSondage); // Re-fetch questions after deletion\n          this.snackBar.open('Question deleted successfully!', 'Close', {\n            duration: 10000\n          });\n        }, error => {\n          console.error('Error deleting question', error);\n        });\n      }\n    }\n    goToAddQuestion() {\n      this.router.navigate(['/addQuestion', this.idSondage]);\n    }\n    static #_ = this.ɵfac = function QuestionTableComponent_Factory(t) {\n      return new (t || QuestionTableComponent)(i0.ɵɵdirectiveInject(i1.QuestionService), i0.ɵɵdirectiveInject(i2.SondageService), i0.ɵɵdirectiveInject(i3.MatSnackBar), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: QuestionTableComponent,\n      selectors: [[\"app-question-table\"]],\n      decls: 19,\n      vars: 3,\n      consts: [[1, \"page-layout\"], [1, \"sidebar\"], [1, \"main-content\"], [1, \"relative\", \"flex\", \"flex-col\", \"min-w-0\", \"break-words\", \"w-full\", \"mb-6\", \"shadow-lg\", \"rounded-lg\", \"bg-white\"], [1, \"rounded-t-lg\", \"mb-0\", \"px-4\", \"py-3\", \"border-0\"], [1, \"flex\", \"flex-wrap\", \"items-center\"], [1, \"relative\", \"w-full\", \"px-4\", \"max-w-full\", \"flex-grow\", \"flex-1\"], [1, \"font-semibold\", \"text-lg\", \"text-blueGray-700\"], [1, \"button-container\"], [\"type\", \"button\", \"matTooltip\", \"Cancel\", 1, \"cancel-button\", 3, \"click\"], [1, \"block\", \"w-full\", \"overflow-x-auto\"], [1, \"content-container\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [\"class\", \"questions-container\", 4, \"ngIf\"], [1, \"empty-state\"], [\"src\", \"assets/img/not_found.png\", \"alt\", \"No Questions\", 1, \"empty-image\"], [1, \"empty-text\"], [1, \"add-button\", 3, \"click\"], [1, \"questions-container\"], [\"class\", \"question-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"add-question-button\"], [1, \"circle-add-button\", 3, \"click\"], [1, \"question-item\"], [1, \"question-header\"], [1, \"delete-button\", 3, \"click\"], [1, \"question-body\"], [4, \"ngIf\"], [\"class\", \"separator\", 4, \"ngIf\"], [\"class\", \"option\", 4, \"ngFor\", \"ngForOf\"], [1, \"option\"], [1, \"fake-radio\"], [1, \"separator\"]],\n      template: function QuestionTableComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"app-admin-navbar\");\n          i0.ɵɵelementStart(1, \"div\", 0);\n          i0.ɵɵelement(2, \"app-sidebar\", 1);\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"h3\", 7);\n          i0.ɵɵtext(9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 8)(11, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function QuestionTableComponent_Template_button_click_11_listener() {\n            return ctx.cancel();\n          });\n          i0.ɵɵelementStart(12, \"mat-icon\");\n          i0.ɵɵtext(13, \"cancel\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtext(14, \" Cancel \");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(15, \"div\", 10)(16, \"div\", 11);\n          i0.ɵɵtemplate(17, QuestionTableComponent_div_17_Template, 6, 0, \"div\", 12)(18, QuestionTableComponent_div_18_Template, 5, 1, \"div\", 13);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(9);\n          i0.ɵɵtextInterpolate1(\" \", ctx.sondage == null ? null : ctx.sondage.title, \" \");\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.questions.length === 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.questions.length > 0);\n        }\n      },\n      dependencies: [i5.NgForOf, i5.NgIf, i6.MatIcon, i7.SidebarComponent, i8.AdminNavbarComponent],\n      styles: [\".page-layout[_ngcontent-%COMP%]{display:flex;height:100vh}.sidebar[_ngcontent-%COMP%]{width:250px;background-color:#f1f1f1;height:100%;position:fixed;top:0;left:0}.main-content[_ngcontent-%COMP%]{margin-left:250px;margin-top:95px;background-color:#fff;padding:30px;border-radius:10px;box-shadow:0 8px 16px #0000001a;flex:1;display:flex;flex-direction:column}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-bottom:20px}.cancel-button[_ngcontent-%COMP%]{background-color:#0056b3;color:#fff;font-size:1rem;font-weight:500;text-transform:uppercase;border:none;border-radius:6px;padding:12px 24px;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 8px #0000001a}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#049;transform:translateY(-2px)}.cancel-button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #007bff80}.content-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;flex-direction:column}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:50px;background-color:#f7f7f7;border-radius:10px;box-shadow:0 8px 16px #0000001a;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.empty-image[_ngcontent-%COMP%]{width:50%;max-width:300px;height:auto;margin-bottom:25px}.empty-text[_ngcontent-%COMP%]{font-size:1.25rem;color:#6c757d;margin-bottom:25px}.add-button[_ngcontent-%COMP%]{background-color:#0056b3;color:#fff;font-size:1rem;font-weight:500;text-transform:uppercase;border:none;border-radius:6px;padding:12px 24px;cursor:pointer;transition:all .3s ease}.add-button[_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-2px)}.add-button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #28a74580}.circle-add-button[_ngcontent-%COMP%]{background-color:#0056b3;color:#fff;font-size:1rem;font-weight:500;text-transform:uppercase;border:none;border-radius:50%;width:50px;height:50px;padding:0;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;margin:20px auto}.circle-add-button[_ngcontent-%COMP%]:hover{background-color:#218838;transform:translateY(-2px)}.circle-add-button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #28a74580}.questions-container[_ngcontent-%COMP%]{background-color:#f9f9f9;border-radius:10px;box-shadow:0 8px 16px #0000001a;padding:20px}.question-item[_ngcontent-%COMP%]{padding-bottom:20px}.question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:700;color:#333}.delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;font-size:.875rem;font-weight:500;text-transform:uppercase;border:none;border-radius:6px;padding:8px 16px;cursor:pointer;transition:all .3s ease}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333;transform:translateY(-2px)}.delete-button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #dc354580}.separator[_ngcontent-%COMP%]{border:none;height:1px;background-color:#e0e0e0;margin:20px 0}.option[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:10px;display:flex;align-items:center}.fake-radio[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;border:2px solid #ccc;margin-right:10px;background-color:#fff}.fake-radio[_ngcontent-%COMP%]:after{content:\\\"\\\";width:10px;height:10px;border-radius:50%;background-color:#0056b3;display:none;margin:auto}.option-text[_ngcontent-%COMP%]{font-size:1rem;color:#333}\"]\n    });\n  }\n  return QuestionTableComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}